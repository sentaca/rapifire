!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.Rapifire=e()}}(function(){return function e(n,o,t){function r(c,s){if(!o[c]){if(!n[c]){var a="function"==typeof require&&require;if(!s&&a)return a(c,!0);if(i)return i(c,!0);var u=new Error("Cannot find module '"+c+"'");throw u.code="MODULE_NOT_FOUND",u}var f=o[c]={exports:{}};n[c][0].call(f.exports,function(e){var o=n[c][1][e];return r(o?o:e)},f,f.exports,e,n,o,t)}return o[c].exports}for(var i="function"==typeof require&&require,c=0;c<t.length;c++)r(t[c]);return r}({1:[function(e,n,o){"use strict";var t=e("merge"),r=function(e){var n=t({url:"wss://pubsub.sentaca.com:1443/pubsub",debug:!1,onconnect:function(){console.log("Use new Rapifire({..., onconnect: fn, ...} to overwrite this function.")},onpresence:function(e){console.log("Use new Rapifire({..., onpresence: fn, ...} to overwrite this function.",e)},onpresenceresponse:function(e){console.log("Use new Rapifire({..., onpresenceresponse: fn, ...} to overwrite this function.",e)},onsubscribe:function(e){console.log("Use new Rapifire({..., onsubscribe: fn, ...} to overwrite this function.",e)}},e),o=n.debug||!1;o&&console.log(n);var r=function(e){return{operation:"init",data:{appId:e.appId,authId:e.authId,authKey:e.authKey}}},i=function(e,n){return{operation:"subscribe",data:{channel:e,interactive:n}}},c=function(e,n){var t=this,i=new WebSocket(e.url),c=e;return i.onopen=function(){o&&console.log("Connected to %s",e.url),i.send(JSON.stringify(r(e))),e.onconnect.apply(t)},i.onmessage=function(e){var r;try{r=JSON.parse(e.data)}catch(i){throw console.error("Received %s but cannot parse it to JSON %s",e.data,i),i}if(o&&console.log("Received message: %O",r),"notification/channel"===r.type&&"function"==typeof c.onpresence)c.onpresence.apply(t,[{channel:r.channel,authId:r.authId,action:r.action}]);else if("presence"===r.type&&"function"==typeof c.onpresenceresponse)for(var s in r.details){var a=r.details[s];c.onpresenceresponse.apply(t,[a])}else"notification/subscription"===r.type&&"function"==typeof c.onsubscribe?c.onsubscribe.apply(t,[{channel:r.channel,authId:r.authId}]):void 0!==r.channel&&null!==r.channel&&n[r.channel]&&n[r.channel].apply(t,[r.message,r.headers])},i},s={},a=c.apply(this,[n,s]);this.subscribe=function(e){var n=[];"[object Array]"===Object.prototype.toString.call(e.channel)?n=e.channel:n.push(e.channel);var o,t=n.length,r=0;for(r=0;t>r;r++){o=n[r];var c=void 0===s[n];s[o]=e.callback,c&&a.send(JSON.stringify(i(o,e.interactive)))}return this},this.publish=function(e,n){var o={operation:"publish",data:{channel:e,message:JSON.parse(n)}};return a.send(JSON.stringify(o)),this},this.presence=function(e){var n={operation:"presence",data:{channel:e}};a.send(JSON.stringify(n))},this.disconnect=function(){a.close()}};n.exports=r},{merge:2}],2:[function(e,n,o){!function(e){function o(e,n){if("object"!==r(e))return n;for(var t in n)"object"===r(e[t])&&"object"===r(n[t])?e[t]=o(e[t],n[t]):e[t]=n[t];return e}function t(e,n,t){var c=t[0],s=t.length;(e||"object"!==r(c))&&(c={});for(var a=0;s>a;++a){var u=t[a],f=r(u);if("object"===f)for(var p in u){var l=e?i.clone(u[p]):u[p];n?c[p]=o(c[p],l):c[p]=l}}return c}function r(e){return{}.toString.call(e).slice(8,-1).toLowerCase()}var i=function(e){return t(e===!0,!1,arguments)},c="merge";i.recursive=function(e){return t(e===!0,!0,arguments)},i.clone=function(e){var n,o,t=e,c=r(e);if("array"===c)for(t=[],o=e.length,n=0;o>n;++n)t[n]=i.clone(e[n]);else if("object"===c){t={};for(n in e)t[n]=i.clone(e[n])}return t},e?n.exports=i:window[c]=i}("object"==typeof n&&n&&"object"==typeof n.exports&&n.exports)},{}]},{},[1])(1)});